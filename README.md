# Calstar 问天星算命理排盘系统

一个高性能、单文件的本地离线命理排盘工具。专为精通八字、紫微斗数的命理师和玄学爱好者设计，提供精准的干支换算、十神分析及 Markdown 报告导出功能。

## 🌟 核心特性

- **精准历法算法**：集成 `lunar-javascript` 核心库，完美处理节气切分（月柱以节气为准）与早晚子时换日逻辑。
- **专业排盘布局**：
    - **八字四柱**：天干十神、纳音、地支藏干、地势（主气十神）一应俱全。
    - **大运与交运**：自动计算 8 步大运，包含起步虚岁、公历年份及精确的交运时间提醒。
    - **神煞与三垣**：集成四柱核心神煞（如天乙贵人、桃花、华盖等）以及胎元、命宫、身宫推算。
    - **十二宫位**：经典的紫微斗数式环绕布局，根据命宫位置逆时针映射十二宫职（命宫、兄弟、夫妻等）。
    - **五行精算**：自动统计全局五行力量分布，并智能识别“五行缺项”。
    - **响应式 Tab 切换**：针对手机端优化，支持在“命盘网格”与“文字报告”间切换，确保小屏布局不乱。
- **天文级占星校正**：
    - **精准太阳星座**：基于二十四节气“中气”判定，解决传统按日期划分的误差，并提供“边界星座 (Cusp)”提醒。
    - **上升星座推算**：结合出生地经纬度与地方恒星时（LST）进行天文级近似推导。
- **灵活的时间输入**：
    - **公历/农历一键切换**：支持完整的农历日期输入（包含自动闰月处理）。
    - **24 小时制下拉菜单**：彻底消除浏览器 AM/PM 干扰。
    - **时辰不详支持**：一键切换为“六字排盘”模式。
    - **十二时辰快速选择**：一键点击子、丑、寅、卯等时辰，并与小时/分钟联动高亮。
- **专业辅助功能**：
    - **真太阳时自动修正**：内置覆盖全国的省市经纬度库，支持基于经度偏移与均时差（EOT）的自动校时。
    - **时辰边界提醒**：实时展示时辰交界时间点及修正参考值，辅助精确判断。
    - **增强型悬浮简介**：鼠标悬停在十神、纳音、神煞及星座上即可查看详细定义的 Tooltips。采用置顶层级设计，解决边框遮挡问题。
    - **Markdown 报告导出**：实时生成结构化、对 AI 极其友好的 Markdown 报告，包含命局五行、神煞取象及命运轨迹。
- **极致隐私与便携**：
    - **完全离线**：不依赖任何外部 CDN，双击 HTML 即可运行，不上传任何隐私数据。
    - **状态记忆**：自动通过 `localStorage` 记住上次的日期、时间及性别选择。

## 🚀 快速开始

### 运行环境
1. 确保您的目录下包含以下三个文件：
    - `index.html` (主程序)
    - `lunar.js` (核心算法库)
    - `tailwind.min.css` (样式库)
2. 使用任何现代浏览器（Chrome, Edge, Safari, Firefox）双击 `index.html` 即可启动。

### 导出报告
在右侧侧边栏中，系统会根据您的排盘实时生成 Markdown 文本。点击“**点击复制报告**”按钮，即可将结果粘贴到您的笔记软件或聊天窗口中。

## 🛠️ 技术栈

- **样式**: Tailwind CSS (Local v2.2.19)
- **算法**: [lunar-javascript](https://github.com/6678/lunar-javascript)
- **字体**: Noto Serif SC (思源宋体)
- **架构**: 原生 Vanilla JS，零框架依赖。

## 📂 目录结构

```text
.
├── index.html          # 主程序逻辑与 UI
├── lunar.js            # 离线版历法核心库
├── tailwind.min.css    # 离线版样式库
├── GEMINI.md           # AI 助手开发上下文
└── README.md           # 项目说明文档
```

## ⚖️ 免责声明

本工具仅供命理研究与学术交流使用，排盘结果仅供参考，不作为任何决策建议。

---
*天垂象，见吉凶，圣人象之。*
